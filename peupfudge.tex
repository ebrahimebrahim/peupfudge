\documentclass[12pt]{article}

%packages
\usepackage[usenames,dvipsnames,table,xcdraw]{xcolor}
\usepackage{multirow}
\usepackage{fullpage}
\usepackage{tikz}
\usepackage{amsmath}
\usepackage{graphics}


\title{PeupFudge}
\author{Ebrahim \\ Yusuf \\ Yussra}
\date{\today}

\parindent0ex
\parskip5mm

%commands
\newcommand{\notes}[1]{{\color{Tan} #1}}

\begin{document}
%\maketitle
\textbf{Peupfudge}
\hfill
\textbf{\today}\\
\textit{Derived from core Fudge rules by Ebrahim, Yusuf, and Yussra.}

\section{Introduction}
\notes{what peupfudge is all about.
it gives you the classes and not the objects.
what a gm is.
pc vs npc.
xp.}

\subsection{Numbers and Adjectives} \label{sec:quant}

\notes{
numbering system, it's logarithmic interpretation, 4dF.
}

\section{Characters}
A \emph{character} is an agent in the world.
Individual characters are represented by their traits and their statuses.
\emph{Traits} describe a character's background and abilities.
\emph{Statuses} describe a character's dynamic current state.

\textbf{Traits}\vspace{-1em}
\begin{itemize}
\item \emph{Characteristics}
describe identity and background
(e.g., name, race, species, height, gender).
\item \emph{Abilities}
represent improvable traits that play a role in action resolution
(e.g. strength, climbing, legal knowledge).
They have a positive integer \emph{ability level}.
\emph{Powers} are abilities that can also be turned off completely.
Abilities are organized in a tree, the mechanics of which are elaborated in section \ref{sec:tree}.
\item \emph{Properties} are binary traits-- a character either has or does not have a given property (e.g. deaf).
\end{itemize}

\textbf{Statuses}\vspace{-1em}
\begin{itemize}
\item \emph{Bars} are ever-changing numerical statuses (e.g. mana, hunger, reputation).
\item \emph{Inventory} is the collection of items on a character's person (see section \ref{sec:items}).
\item \emph{Wound level} is a listing of a character's current injuries (see section \ref{sec:wounds}).
\item \emph{Conditions} are binary statuses (e.g. asleep, paralyzed, poisoned, on fire, etc.)
\end{itemize}

In creating a game world, a GM needs to specify the structure of a character by specifying the traits and statuses relevant to the campaign. A GM must essentially decide how a character sheet looks. In particular, this will involve inventing the characteristics, abilities, and bars, which might be based on the specific setting of the game.

\subsection{The Ability Tree}\label{sec:tree}			

The purpose of an ability level is to have something to roll against while resolving actions. If you don't know what that means, have a look at the introduction to section \ref{sec:actions} before diving into the details of this section.

%abilities starting at poor
Most abilities have an initial (untrained) level of 3. The GM may choose some different initial ability levels based on the difficulty of a skill. An ability that is very hard to pick up might have an initial level of 1, while a very easy ability could start at 5. What is considered ``untrained'' will depend on the setting of the world.

%define structure of tree, as well as terms 'skill' and 'attribute'
Abilities are arranged in a tree structure in which broad abilities govern more specific ones.
An ability that governs others is an \emph{attribute} (a non-terminal node), while an ability that does not govern any others is a \emph{skill} (a terminal node).
Each edge of the tree (each governing of one ability by another) has an associated \emph{weight}.
Below is an example of an initial ability tree, with an ability level written next to each ability.
Attributes are shown in blue, skills are shown in red, and weights are labeled on edges.

\begin{center}
\input{python/trees/example.tree.tex}
\end{center}

\paragraph{The Idea} Let us summarize the mechanics to be explained. The weight of an ability represents its importance to its group, i.e. the degree to which its improvement improves its governing ability.
Players are granted experience points (xp) throughout the game. They may use xp to raise skills that they have recently used (i.e. rolled against).
Only skills, and not attributes, may be raised directly with xp.
The mechanics of training abilities are such that competence in skills related to a given skill make it easier to train that skill.
One effect of this is that players are encouraged
to make characters that make sense and have some degree of specialization.


%parent ability makes it easier to train children. need to consider full ancestral line. explain 'xp' or refer to sec:dev. give table and equation. note that poor parents are like no parents.
\subsubsection{Training Skills}\label{sec:skill}
Skills may be trained with xp.
The xp cost of raising a particular skill level depends on
the skill's current level and the levels of all its ancestor attributes in the ability tree.
A high-level skill is harder to raise.
A skill with high-level governing attributes is easier to raise.
%(I deleted "because it implies related knowledge" b/c we already said that in the conceptual summary -e)
Use the following table to determine the xp cost for a skill level increase:

\begin{center}
\resizebox{\columnwidth}{!}{
\input{xptable.tex}
}
\end{center}
%I don't like using the standard roman font in the table. should find a better font to display those numbers


The \emph{attribute bonus} is a weighted average over all ancestor attributes of the skill being trained:
\begin{align*}
\textrm{[attribute bonus]}
=\big(\ &\textrm{[level of governing attribute]}\\
&+\ \frac{1}{2}\textrm{[level of its governing attribute]}\\
&+\ \frac{1}{4}\textrm{[level of its governing attribute]}\\
&+\ \cdots \big)
\ /\ \big(1+\frac{1}{2}+\frac{1}{4}+\cdots\big)
\end{align*}
Equivalently,
\vspace{-6mm}
\begin{itemize}
\item Starting from the skill, go up along the line of attributes
and assign a weight of '1' for the attribute farthest from the skill.
\item Double that weight for each attribute going down the line.
\item Use that weight and the individual attribute levels to determine the total attribute bonus for the skill.
\end{itemize}
\vspace{-6mm}
Thus the closer an attribute is to a skill in the ability tree, the larger its hand in governing the skill. 




%raising child ability level has chance of raising parent. this applies to attributes as well. give formula and way to implement.
\subsubsection{Training Attributes}\label{sec:att}
Unlike skills, attributes cannot be trained directly using xp.
Whenever an ability level is increased, there is a chance that its governing ability will also increase.
This mechanic applies to \emph{all} abilities, so that the effect of training skills via xp
propagates up the ability tree in a probabilistic fashion.
Here's how it works:
Let $A$ be an attribute that governs abilities $B_1,\ldots,B_n$, with respective weights $w_1,\ldots, w_n$.
Whenever $B_i$ increases in level, the chance that $A$ increases in level is given by
$$\frac{w_i}{w_1+\cdots+w_n}\ .$$
It is sensible to round this quantity to the nearest $(\frac{1}{n})^\text{th}$ and roll a d$n$ to determine
the outcome.
In fact, this quantity only needs to be computed once for each edge of the ability tree,
and the weights can then be dispensed with.
After choosing initial weights and computing these probabilities,
one might as well label the edges by the dice roll needed to raise a governing attribute.
We recommend that the GM present the game's ability tree to players in this format.
To demonstrate, here is our example tree from above, with d20 difficulties on the edges:
\begin{center}
\input{python/trees/example.tree.d20.tex}
\end{center}
When a player trains their \emph{climbing} skill by spending the needed xp,
they also roll a d20 to see if their \emph{body} attribute increases.
If they roll at least a 17, it does increase.
In this case they would roll again for a chance to increase their \emph{level} attribute,
with success if the roll is at least an 11.







\subsubsection{Tree Design}
The mechanics for training skills and attributes are meant to resemble real training and experience.
Training a specific skill is easier to do given more general related experience,
and more so for that experience which pertains most directly to the skill,
hence the attribute bonus of section \ref{sec:skill}.
At the same time, that general experience typically comes from training in a wide variety of related specific skills,
hence section \ref{sec:att}.

%good tree design is important. if it seems limiting that only skills can be trained directly, then the tree may not be designed well.
Designing a good ability tree may require some practice and repeated revisions at first.
If it seems limiting in the context of a given tree that attributes cannot be trained directly,
then consider redesigning the tree.
Perhaps some of those attributes should instead be skills, and new attributes should be
introduced to group them.
One approach to designing a tree from scratch is to begin by listing all the desired skills
and grouping them into related clumps.
Suitable attributes could take form in the clumps.

An ability tree need not have a single root ability; it could instead
consist of multiple disconnected ability trees.
A reasonable root ability, if one is desired, would be akin to the notion of a ``character level'' common to role playing games.
While it wouldn't mean quite the same thing in the context of an ability tree, \emph{level} is still a compelling name for
what could be thought of as ``general competence'' or ``the ability to learn.''

\paragraph{Powers}
Some abilities can be labeled as \emph{powers}, which just means that they can be disabled completely.
A power that is disabled for a character cannot be trained or rolled against,
but it plays the same role as an ordinary ability for all other purposes (e.g. calculating
the probabilities of section \ref{sec:att}).
All abilities governed by a power are automatically powers, and they are
automatically disabled when the power is disabled.
The GM should decide what sorts of circumstances cause various powers to become enabled.

The option of powers is available because it sometimes makes sense for certain abilities to be altogether unavailable to certain characters.
One could implement such abilities as \emph{properties} instead (explained in section \ref{sec:dev}),
but it may be desirable to incorporate these things into the ability tree so that they can be trained and tracked with other abilties.
A typical example would be magic as an innate ability:
non-casters should have it disabled in their tree, but one could envision an entire subtree consisting of schools of magic for casters.

\paragraph{NPCs}
Tracking the abilities of every NPC using a full ability tree can become a hassle.
Fortunately, there is an easy way to lessen this work: simply \emph{trim} their ability tree!
That is, shave off some abilities from the skill end of their tree, so that some attributes become skills.




\subsection{Character Development}\label{sec:dev}

The GM should provide players with the structure of an empty character sheet,
complete with all the needed traits and statuses to be initialized by players.
While abilities have well-defined mechanics, some other traits and statuses
need to be specified and elaborated by the GM.

First we take a moment explain how xp works throughout gameplay,
then we lay out the different aspects of character creation.

\subsubsection{Using Experience Points}
Experience points (xp) quantify the process of training abilities.
The GM doles out xp to the players after their characters accomplish some chunk of the narrative.
The idea is that more xp should be awarded for greater success and for the accomplishment of more difficult tasks,
but this is ultimately up to the GM.
%xp can only be used to raise skills, not attributes. and only ones that were used (rolled against) lately. (players ask gm).
The purpose of xp is to spend it to increase the level of skills, according to the xp cost table in section \ref{sec:tree}.
Note that attribute levels cannot be raised directly, but instead have a chance of increasing every time a governed skill is trained.

The skills that can be trained should be limited to ones that are relevant to the accomplishments that resulted in the xp reward in the first place.
A GM may enforce this by listing 
(perhaps separately for each player)
which skills have been opened
to xp-allocation after a given xp reward,
or by asking players to clear each skill with him.
Players cannot save xp to use on arbitrary skills; they must \emph{allocate} their xp towards skills when they receive it.
It is fine to allocate to a skill an amount of xp less than what is needed to increase its level.
Players are responsible for keeping track of how much xp they have invested in partially purchased skill level increases.

\subsubsection{Character Creation}
Players start with some xp to build up their ability tree.
A reasonable starting quantity is \input{xp_start_multiplier.tex}xp times the number of skills in the tree,
but a GM may have reasons for using more or less, or even for varying the amount for certain characters.\footnote{
The ability tree a character starts with represents skills gained
gained during a character's life up to the beginning of the narrative,
so these sorts of GM decisions can be based on other information about the character.}
This starting xp is spent during character creation, and it works just like the ordinary character development that follows an xp award.
Since much depends on rolling at this stage, we recommend that it be done ``live;'' i.e. in the presence of other players.
As an alternative to this form of character creation, a GM may provide prepared \emph{classes} for players to pick from.
A \emph{class} is nothing but a pre-made ability tree.
This alternative eliminates rolling completely; a middle ground option would be to provide a choice
of partially developed classes and also give a bit of xp to customize things.

Characteristics should also be pinned down during character creation.
Since they play a mostly narrative role, there are no detailed mechanics to govern their structure.
The GM simply chooses which characteristics are relevant to the game world, and they are included on character sheets.
Players are encouraged to write descriptions that are brief enough to reference and recall while still
providing sufficient narrative substance to make characters feel real.


Some aspects of a character's description ought to be acknowledged more formally.
They might need to interact with other game mechanics
in a specific way (e.g. a character with no arms should have some trouble training their swordsmanship),
or they might just need to be put in the spotlight due to their effect on many situations
(e.g. a deaf character should have a reduced chance of noticing the ambush they are about to walk into).
This is addressed by one more character trait: \emph{properties}.
A property should be a single word or very brief phrase that can be true of a character or not,
and it should have a description if it needs one.
A character's properties should be listed together on their character sheet.
Players can come up with properties at character creation and get them approved by the GM.
The GM can also provide a list of properties for players to choose from, with some descriptions and constraints.

That covers traits. As for statuses,
the GM should provide initialization instructions with each status they include.
If characters have a reputation \emph{bar}, how shall it start out?
How about \emph{inventory}-- how should that start out?



\subsubsection{Belated Tree Augmentation}\label{sec:bta}

In case you find yourself wishing, long after starting a game,
that you had included a certain skill in the ability tree,
we propose some rules for introducing it.
Add the skill in the desired position to every player's tree.
Include the desired weight;
if the the edge labels correspond to dice roll difficulties, then recalculate those for all skills governed by the governing attribute.
Set the skill's level to 2 below the level of its governing attribute (capped below at 1) for each player.




\subsection{Items and Inventory} \label{sec:items}
A character's \emph{inventory} is the list of items carried on their person,
along with the ways in which those items are carried.
Ultimately, it is a hierarchical listing of containers and items.
Yes... it is another tree!
The root nodes of the inventory tree are the character's ``natural'' containers (hands, back, etc.),
the intermediate nodes are containers (which are themselves items),
and the leaf nodes are arbitrary items.

\emph{Items} are material entities in the world, 
specifically ones that a character would carry.
Like characters, they are represented by their \emph{traits} and \emph{statuses}.

\textbf{Item Traits}
\vspace{-1em}
\begin{itemize}
\item \emph{Characteristics} are item descriptors (e.g. name, textual description, material, shape)
\item \emph{Attributes} are numerical traits (e.g. weight, size).
\end{itemize}
\textbf{Item Statuses}
\vspace{-1em}
\begin{itemize}
\item \emph{Bars} are dynamic numerical statuses (e.g. condition).
\item \emph{Conditions} are binary statuses (e.g. broken handle).
\end{itemize}

Not all items need to be represented at the same level of detail.
For many items, an item name may suffice.

The inventory tree should be subject to some constraints
(e.g. due to container volumes, character strength, fatigue, etc.).
The GM should decide how to manage these constraints
(e.g. containers have a volume attribute, character's have a carrying capacity based on some physical ability, etc.).



\section{Actions}\label{sec:actions}
When a character attempts a task that has a possibility of failure, the outcome is governed partly by a dice roll.
The dice roll represents the dependence of the outcome on factors that are not modeled in the game or that are altogether unpredictable.
We will call these \emph{purely variable} factors.
The basic idea is that the attempt is a success if
$$ R + M \geq D, $$
where $R$ is the result of a \emph{roll}, $M$ is some sort of \emph{modifier} based on an ability level,
and $D$ is the \emph{difficulty} of the task.
The specifics depends on the type of action: opposed or unopposed.

Let us use the term \emph{difficulty factors} to refer to
the primary factors leading to the possibilities of success or failure for an action,
but only those factors that are \emph{indepdent of who is attempting the action}.
For those factors that \emph{are due to the character attempting the action} let us use the term \emph{aiding factors}.
The difficulty factors for a character attempting to climb a cliff are things
like the steepness of the cliff and the availability of footholds.
The climbing skill of the character and the fact that they have a grappling hook would be aiding factors.
The difficulty factors for a character attempting to punch someone in a brawl might include the defensive abilities of the opponent,
while the punching abilities of the character would be aiding factors.

\subsection{Unopposed Actions}\label{sec:unopposed}
If the difficulty factors for an action cannot be attributed to some other character's abilities,
then the action is \emph{unopposed}.
In this case:
\vspace{-1em}
\begin{itemize}
\item $R$ is the result of rolling $4$dF.
\item $M$ is determined based on the aiding factors for the action; it is usually the level of an ability.
\item $D$ is determined based on the difficulty factors for the action.
\end{itemize}
Some judgement is needed for the determination of $M$ and $D$. For $M$,
find a skill to serve as the primary aiding factor for the character's action,
and set $M$ to be the level of that skill.
If no suitable skill is available, you may use a suitable attribute... with a possible \emph{attribute penalty}.\footnote{
The attribute penalty does not apply to attributes that became skills for NPCs with trimmed trees.}
If the attribute description really nails the aiding factors, then no penalty is needed.
But if the attribute is being used as a stand-in for a more specific ability that happens not to be in the ability tree,
then set $M$ to be two less than the level of that attribute.
In uncertain and in-between situations, set $M$ to be one less than the level of the attribute.
Finally, the GM should use their judgement to modify $M$ a bit further based on any other aiding factors.
Making reasonable decisions about the numbers here requires a proper understanding of section \ref{sec:quant}.
This is even more crucial for $D$, which is left completely up to the judgement of the GM.

Summarizing, an unopposed action is successful if
\begin{align*}
4\text{dF}
+([\text{relevant ability level}]
-[\text{attribute penalty}]
+[\text{other aiding factors}])
\geq D.
\end{align*}
The value of $R$ can feed directly into the narrative,
for it represents the purely variable aspect of a character's performance of a task,
independent of aiding factors and difficulty factors.
It can be fun to asssign extreme narrative interpretations to extreme values of $R$.


\subsection{Opposed Actions}\label{sec:opposed}
If the difficulty factors for an action are due to some other character's abilities,
then the action is \emph{opposed}, and we refer to this other character as the \emph{opposing character}.
In this case:
\vspace{-1em}
\begin{itemize}
\item $R$ is $2$dF.
\item $M$ is determined based on the aiding factors for the action; it is usually an ability level of the acting character.
\item $D$ is $R' + M'$, where
\begin{itemize}
\item $R'$ is $2$dF.
\item $M'$ is determined based on the difficulty factors for the action; it is usually an ability level of the opposing character.
\end{itemize}
\end{itemize}
Here $M$ and $M'$ are determined just like $M$ for unopposed actions.
Summarizing, an opposed action is successful if
\begin{align*}
&2\text{dF}
+([\text{relevant ability level}]
-[\text{attribute penalty}]
+[\text{other aiding factors}])\\
\geq\ & 
2\text{dF}
+([\text{relevant opposing ability level}]
-[\text{attribute penalty}]
+[\text{other difficulty factors}]).
\end{align*}
For the sake of feeding the outcomes of rolls into the narrative,
$R$ represents the purely variable aspect of the acting character's performance,
while $R'$ represents the purely variable aspect of the opposing character's performance.
It makes sense to have the respective acting and opposing players roll the dice for these.







\subsection{Combat}
\notes{
[description of what is combat round]

	During a combat round, a player who is able to attack another player (e.g. is within range) may attempt to do so.
	It is an opposed action, resolved as follows:
		Result of attack: ReD (Relative Degree) = attacker's RoD - defender's RoD (0 is miss, 1 is graze, >1 is hit)
			RoD (Rolled Degree): 2dF + Relevant trait + StanceMod + SitMod
				StanceMod is Stance for attacker and is -Stance for defender.
					Stance is a number from -2 to 2 chosen by each player at the beginning of the combat round.
				SitMod is a modifier based on various situational conditions (see below).
		Miss: No peup
		Hit: 2x ReD + DF + 1dF (dmg die roll)
			DF (Dmg Factor): Attacker's ODF - Defender's DDF
				ODF (Offensive Dmg Factor): Relevant trait (e.g. Str) + Weapon (e.g. type, sharpness, scale, condition, etc.)
				DDF (Defensive Dmg Factor): Relevant trait (e.g. Con) + Armor (e.g. material, toughness, scale, condition, etc.)
			Hit severity comes from top left of pg. 47
		Graze: DF + 1dF (dmg die roll)
			Graze severity comes from Table 4.56
	Note that players may be simulataneously attempting to attack each other in the same combat round.
	This is resolved as above (i.e. as multiple separate opposed actions).

Target body parts:
a player may call, before their attack is resolved, that they intend to target a certain body part.
this introduces a negative SitMod into the attacker's rolled degree, based on the difficulty of hitting that body part.
if the player does not miss, then one records in addition to the usual wounds the specific body part that received the wound.
negative penalities are introduced to relevant traits (see SitMod -> injuries).

evasion

	possible suggestion for scale: log base 2
pulling punches, knocking out, stunning
speed
peup

crit system
}

\subsubsection{Situational Modifers}
\notes{Situational stuff (e.g. positioning, weapon lengths, height advantages, cover, range, multiple combatants, injuries, peup, surprise, scale difference)}

\subsubsection{Wounds and Healing}\label{sec:wounds}

\section{Appendix}


\notes{subseciton on examples of ability trees (or reference to later appearance of examples)}

\notes{an index/summary of game mechanics. this is something that one could read to remind themselves of all the rules
if they've already read the manual. also this would be something for a GM to read to remind themselves
exactly what it is about their game world they need to specify (like a list of questions for them to answer).
ideally this should be short, and in list format"}

\end{document}
